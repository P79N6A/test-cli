<i18n>
    {
        "zh-cn": {
            "新股认购":"新股认购",
            "认购记录":"认购记录",
            "抱歉您的证券账户尚未开通，暂时无法认购新股。":"抱歉您的证券账户尚未开通，暂时无法认购新股。",
            "立即开通账户":"立即开通账户",
            "新股认购、暗盘交易提醒功能已上线，点击查看详情。":"新股认购、暗盘交易提醒功能已上线，点击查看详情。",
            "新股名称":"新股名称",
            "认购账户":"认购账户",
            "请选择认购账户":"请选择认购账户",
            "免费升级融资账户":"免费升级融资账户",
            "可提升中签率":"可提升中签率",
            "认购股数越多中签率越高，升级融资账户后您可以通过使用融资来申购更多股数。":"认购股数越多中签率越高，升级融资账户后您可以通过使用融资来申购更多股数。",
            "认购截止":"认购截止",
            "剩余":"剩余",
            "现金认购已于xx时间截止": "现金认购已于 {time} 截止",
            "（使用银行融资）":"（使用银行融资）",
            "银行融资已于xx时间截止": "银行融资已于 {time} 截止",
            "dd天HH小时mm分":"dd天HH小时mm分",
            "认购方式":"认购方式",
            "现金认购":"现金认购",
            "富途融资认购":"富途融资认购",
            "融资认购":"融资认购",
            "0本金认购":"0本金认购",
            "特权用户尊享":"特权用户尊享",
            "xx倍银行融资认购已截止":"{num} 倍银行融资认购已截止",
            "xx倍银行融资认购已提前截止":"{num} 倍银行融资认购已提前截止",
            "认购可用金额不足xx港币，无法使用xx倍杠杆": "认购可用金额不足 {money} 港币，无法使用 {num} 倍杠杆",
            "查看详情":"查看详情",
            "0本金认购因额度紧张已提前截止":"0本金认购因额度紧张已提前截止",
            "该新股支持xx倍银行融资认购":"该新股支持{num}倍银行融资认购",
            "该新股不支持银行融资，超出可提部分将使用富途融资":"该新股不支持银行融资，超出可提部分将使用富途融资",
            "可用现金":"可用现金",
            "可用金额":"可用金额",
            "使用账户资金":"使用账户资金",
            "xx港币":"{money} 港币",
            "港币":"港币",
            "可用金额为可用于新股认购的金额，其中现金可提金额为xx港币。如已开通跨市场交易且关联账户有欠款，则购买力会相应减少，具体请以此认购页面提示的金额为准。": "可用金额为可用于新股认购的金额，其中现金可提金额为 {money} 港币。如已开通跨市场交易且关联账户有欠款，则购买力会相应减少，具体请以此认购页面提示的金额为准。",
            "可用现金为当前账户的现金金额":"可用现金为当前账户的现金金额",
            "可用现金为当前账户可用于现金认购的现金可提，可能小于客户端界面展示的最大可提金额，请以此认购页面提示的金额为准。":"可用现金为当前账户可用于现金认购的现金可提，可能小于客户端界面展示的最大可提金额，请以此认购页面提示的金额为准。",
            "可用现金为可用于新股认购的金额，可能大于现金可提，如已开通跨市场交易且关联账户有欠款，则购买力会相应减少。具体请以此认购页面提示的金额为准。":"可用现金为可用于新股认购的金额，可能大于现金可提，如已开通跨市场交易且关联账户有欠款，则购买力会相应减少。具体请以此认购页面提示的金额为准。",
            "可输入区间：xx~xx":"可输入区间：{min}~{max}",
            "最大可用：xx":"最大可用：{money}",
            "现金可提：xx港币":"现金可提：{money}港币",
            "使用现金可提不收息。如已开通跨市场交易且关联账户有欠款，则购买力会相应减少，具体请以此认购页面提示的金额为准。":"使用现金可提不收息。如已开通跨市场交易且关联账户有欠款，则购买力会相应减少，具体请以此认购页面提示的金额为准。",
            "预计认购将仅使用到账户资金xx港币（不含手续费）":"预计认购将仅使用到账户资金 {money} 港币（不含手续费）",
            "其中预计将使用到富途融资xx港币":"其中预计将使用到富途融资 {money} 港币",
            "预计认购将使用到富途融资xx港币":"预计认购将使用到富途融资 {money} 港币",
            "认购股数":"认购股数",
            "请选择认购股数":"请选择认购股数",
            "可用现金不足":"可用现金不足",
            "可用金额不足":"可用金额不足",
            "至少需使用账户资金：xx港币":"至少需使用账户资金：{money}港币",
            "使用银行融资":"使用银行融资",
            "年利率xx%":"年利率 {num} %",
            "1. 使用银行融资=认购金额-使用账户资金2. 银行融资利息=使用银行融资金额 * 计息日 * 日利率3. 预计计息日为xx天，计息时长为富途截止认购后一自然日到公布中签前一自然日": "1. 使用银行融资=认购金额-使用账户资金<br>2. 银行融资利息=使用银行融资金额 * 计息日 * 日利率<br>3. 预计计息日为{day}天，计息时长为富途截止认购后一自然日到公布中签前一自然日",
            "剩余银行融资额度紧张":"剩余银行融资额度紧张",
            "下一步，确认明细":"下一步，确认明细",
            "现金认购已经截止":"现金认购已经截止",
            "融资认购已经截止":"融资认购已经截止",
            "请先输入使用账户资金金额":"请先输入使用账户资金金额",
            "超出最大可使用的金额":"超出最大可使用的金额",
            "使用的账户资金不足所需最小额":"使用的账户资金不足所需最小额",
            "使用的账户资金小于申请认购的最低额":"使用的账户资金小于申请认购的最低额",
            "融资认购不能修改为现金认购":"融资认购不能修改为现金认购",
            "开通融资账户后即可使用此方式":"开通融资账户后即可使用此方式",
            "完成开通":"完成开通",
            "不支持修改为0本金认购":"不支持修改为0本金认购",
            "港股融资账户":"港股融资账户",
            "请选择港股融资账户进行认购，即可享受0本金认购特权":"请选择{desc}进行认购，即可享受0本金认购特权",
            "xx股xx港币":"{num} 股 {money} 港币",
            "抱歉您的证券账户尚未开通，暂时无法新股认购":"抱歉您的证券账户尚未开通，暂时无法新股认购",
            "您已申请认购该支股票，若需要修改，请在认购记录列表中先撤销后重新提交申请":"您已申请认购该支股票，若需要修改，请在认购记录列表中先撤销后重新提交申请",
            "查看":"查看",
            "银行融资认购修改已于xx时间结束，当前时间已不支持修改认购":"银行融资认购修改已于{time}结束，当前时间已不支持修改认购",
            "您已申请认购该支股票，查看任务详情":"您已申请认购该支股票，查看任务详情",
            "银行融资认购只支持追加，修改后您使用银行融资的金额不得少于xx港币":"银行融资认购只支持追加，修改后您使用银行融资的金额不得少于 {money} 港币"
        },
        "zh-hk": {
            "新股认购":"新股認購",
            "认购记录":"認購記錄",
            "抱歉您的证券账户尚未开通，暂时无法认购新股。":"抱歉您的證券帳戶尚未開通，暫時無法認購新股。",
            "立即开通账户":"立即開通帳戶",
            "新股认购、暗盘交易提醒功能已上线，点击查看详情。":"新股認購、暗盤交易提醒功能已上線，點擊查看詳情。",
            "新股名称":"新股名稱",
            "认购账户":"認購帳戶",
            "请选择认购账户":"請選擇認購帳戶",
            "免费升级融资账户":"免費升級孖展帳戶",
            "可提升中签率":"可提升中籤率",
            "认购股数越多中签率越高，升级融资账户后您可以通过使用融资来申购更多股数。":"認購股數越多中籤率越高，升級孖展帳戶後您可以通過使用孖展來申購更多股數。",
            "认购截止":"認購截止",
            "剩余":"剩餘",
            "现金认购已于xx时间截止": "現金認購已於 {time} 截止",
            "（使用银行融资）":"（使用銀行孖展）",
            "银行融资已于xx时间截止": "銀行孖展已於 {time} 截止",
            "dd天HH小时mm分":"dd天HH小時mm分",
            "认购方式":"認購方式",
            "现金认购":"現金認購",
            "富途融资认购":"富途孖展認購",
            "融资认购":"孖展認購",
            "0本金认购":"0本金認購",
            "特权用户尊享":"特權用戶尊享",
            "xx倍银行融资认购已截止":"{num} 倍銀行孖展認購已截止",
            "xx倍银行融资认购已提前截止":"{num} 倍銀行孖展認購已提前截止",
            "认购可用金额不足xx港币，无法使用xx倍杠杆": "認購可用金額不足 {money} 港幣，無法使用 {num} 倍槓桿",
            "查看详情":"查看詳情",
            "0本金认购因额度紧张已提前截止":"0本金認購因額度緊張已提前截止",
            "该新股支持xx倍银行融资认购":"該新股支持{num}倍銀行孖展認購",
            "该新股不支持银行融资，超出可提部分将使用富途融资":"該新股不支持銀行孖展，超出可提部分將使用富途孖展",
            "可用现金":"可用現金",
            "可用金额":"可用金額",
            "使用账户资金":"使用帳戶資金",
            "xx港币":"{money} 港幣",
            "港币":"港幣",
            "可用金额为可用于新股认购的金额，其中现金可提金额为xx港币。如已开通跨市场交易且关联账户有欠款，则购买力会相应减少，具体请以此认购页面提示的金额为准。": "可用金額為可用於新股認購的金額，其中現金可提金額為{money} 港幣。如已開通跨市場交易且關聯帳戶有欠款，則購買力會相應減少，具體請以此認購頁面提示的金額為準。",
            "可用现金为当前账户的现金金额":"可用現金為當前帳戶的現金金額",
            "可用现金为当前账户可用于现金认购的现金可提，可能小于客户端界面展示的最大可提金额，请以此认购页面提示的金额为准。":"可用現金為當前帳戶可用於現金認購的現金可提，可能小於客戶端界面展示的最大可提金額，請以此認購頁面提示的金額為準。",
            "可用现金为可用于新股认购的金额，可能大于现金可提，如已开通跨市场交易且关联账户有欠款，则购买力会相应减少。具体请以此认购页面提示的金额为准。":"可用現金為可用於新股認購的金額，可能大於現金可提，如已開通跨市場交易且關聯帳戶有欠款，則購買力會相應減少。具體請以此認購頁面提示的金額為準。",
            "可输入区间：xx~xx":"可輸入區間：{min}~{max}",
            "最大可用：xx":"最大可用：{money}",
            "现金可提：xx港币":"現金可提：{money}港幣",
            "使用现金可提不收息。如已开通跨市场交易且关联账户有欠款，则购买力会相应减少，具体请以此认购页面提示的金额为准。":"使用現金可提不收息。如已開通跨市場交易且關聯帳戶有欠款，則購買力會相應減少，具體請以此認購頁面提示的金額為準。",
            "预计认购将仅使用到账户资金xx港币（不含手续费）":"預計認購將僅使用到帳戶資金 {money} 港幣（不含手續費）",
            "其中预计将使用到富途融资xx港币":"其中預計將使用到富途孖展 {money} 港幣",
            "预计认购将使用到富途融资xx港币":"預計認購將使用到富途孖展 {money} 港幣",
            "认购股数":"認購股數",
            "请选择认购股数":"请选择认购股数",
            "可用现金不足":"請選擇認購股數",
            "可用金额不足":"可用金額不足",
            "至少需使用账户资金：xx港币":"至少需使用帳戶資金：{money}港幣",
            "使用银行融资":"使用銀行孖展",
            "年利率xx%":"年利率 {num} %",
            "1. 使用银行融资=认购金额-使用账户资金2. 银行融资利息=使用银行融资金额 * 计息日 * 日利率3. 预计计息日为xx天，计息时长为富途截止认购后一自然日到公布中签前一自然日": "1. 使用銀行孖展=認購金額-使用帳戶資金<br>2. 銀行孖展利息=使用銀行孖展金額* 計息日* 日利率<br>3. 預計計息日為{day}天，計息時長為富途截止認購後一自然日到公佈中籤前一自然日",
            "剩余银行融资额度紧张":"剩餘銀行孖展額度緊張",
            "下一步，确认明细":"下一步，確認明細",
            "现金认购已经截止":"現金認購已經截止",
            "融资认购已经截止":"孖展認購已經截止",
            "请先输入使用账户资金金额":"請先輸入使用帳戶資金金額",
            "超出最大可使用的金额":"超出最大可使用的金額",
            "使用的账户资金不足所需最小额":"使用的帳戶資金不足所需最小額",
            "使用的账户资金小于申请认购的最低额":"使用的帳戶資金小於申請認購的最低額",
            "融资认购不能修改为现金认购":"孖展認購不能修改為現金認購",
            "开通融资账户后即可使用此方式":"開通孖展帳戶後即可使用此方式",
            "完成开通":"完成開通",
            "不支持修改为0本金认购":"不支持修改為0本金認購",
            "港股融资账户":"港股孖展帳戶",
            "请选择港股融资账户进行认购，即可享受0本金认购特权":"請選擇{desc}進行認購，即可享受0本金認購特權",
            "xx股xx港币":"{num} 股 {money} 港幣",
            "抱歉您的证券账户尚未开通，暂时无法新股认购":"抱歉您的證券帳戶尚未開通，暫時無法新股認購",
            "您已申请认购该支股票，若需要修改，请在认购记录列表中先撤销后重新提交申请":"您已申請認購該支股票，若需要修改，請在認購記錄列表中先撤銷後重新提交申請",
            "查看":"查看",
            "银行融资认购修改已于xx时间结束，当前时间已不支持修改认购":"銀行孖展認購修改已於{time}結束，當前時間已不支持修改認購",
            "您已申请认购该支股票，查看任务详情":"您已申請認購該支股票，查看任務詳情",
            "银行融资认购只支持追加，修改后您使用银行融资的金额不得少于xx港币":"銀行孖展認購只支持追加，修改後您使用孖展的金額不得少於 {money} 港幣"
        },
        "en-us": {
            "新股认购":"IPO Subscription",
            "认购记录":"Subscription Record",
            "抱歉您的证券账户尚未开通，暂时无法认购新股。":"Sorry, your securities account has not been opened yet, and you are temporarily unable to subscribe to new shares.",
            "立即开通账户":"Open Account now",
            "新股认购、暗盘交易提醒功能已上线，点击查看详情。":"IPO subscription, grey market trading reminder function is online, click here to view details.",
            "新股名称":"Stock Name",
            "认购账户":"Subscription Account",
            "请选择认购账户":"Please select a subscription account",
            "免费升级融资账户":"Free upgrade financing account",
            "可提升中签率":"can increase the allotment rate",
            "认购股数越多中签率越高，升级融资账户后您可以通过使用融资来申购更多股数。":"Larger subscribed quantity of shares in an IPO may, in normal circumstances,results in higher possibility to win the bid for more or all shares subscribed. Financing account gives you more flexibility on the subscription amount, by increasing your purchasing power in an IPO subscription.",
            "认购截止":"Subscription Deadline",
            "剩余":"Remaining",
            "现金认购已于xx时间截止": "Cash subscription has been closed at {time}",
            "（使用银行融资）":"(IPO Financing by Bank)",
            "银行融资已于xx时间截止": "Bank IPO Financing has been closed at {time}",
            "dd天HH小时mm分":"ddd HHh mmmins",
            "认购方式":"Subscription Type",
            "现金认购":"Cash Subscription",
            "富途融资认购":"Futu Financing",
            "融资认购":"IPO Financing",
            "0本金认购":"Zero Asset Subscription",
            "特权用户尊享":"privilege",
            "xx倍银行融资认购已截止":"{num} times bank financing subscription had been terminated",
            "xx倍银行融资认购已提前截止":"{num} times bank financing subscription had been terminated early",
            "认购可用金额不足xx港币，无法使用xx倍杠杆": "The available amount of subscription is less than {money} HKD , so {num} times leverage is not available.",
            "查看详情":"View details",
            "0本金认购因额度紧张已提前截止":"Zero assets due to tight quota, financing subscription has been terminated early.",
            "该新股支持xx倍银行融资认购":"This IPO offers financing service at {num}-time leverage",
            "该新股不支持银行融资，超出可提部分将使用富途融资":"The new shares do not support bank financing, and more than the available portion will use Futu financing.",
            "可用现金":"Available Cash",
            "可用金额":"Amount Available",
            "使用账户资金":"Use Account funds",
            "xx港币":"{money} HKD",
            "港币":"HKD",
            "可用金额为可用于新股认购的金额，其中现金可提金额为xx港币。如已开通跨市场交易且关联账户有欠款，则购买力会相应减少，具体请以此认购页面提示的金额为准。": "Available cash is the amount available for subscription of new shares and may be higher than cash. If cross-market transactions are already open and the relevant accounts are in arrears, the purchasing power will be reduced accordingly. For more information, see the amount shown on the subscription page.",
            "可用现金为当前账户的现金金额":"Available cash is the current cash amount for account",
            "可用现金为当前账户可用于现金认购的现金可提，可能小于客户端界面展示的最大可提金额，请以此认购页面提示的金额为准。":"Available cash for IPO subscription may be different with the available amount shown on this page.Available cash amount for IPO subscription shown on the subscription page shall prevail.",
            "可用现金为可用于新股认购的金额，可能大于现金可提，如已开通跨市场交易且关联账户有欠款，则购买力会相应减少。具体请以此认购页面提示的金额为准。":"Available cash is the amount available for subscription of new shares and may be higher than cash. If cross-market transactions are already open and the relevant accounts are in arrears, the purchasing power will be reduced accordingly. For more information, see the amount shown on the subscription page.",
            "可输入区间：xx~xx":"[{min} ~ {max}]",
            "最大可用：xx":"Maximum: {money}",
            "现金可提：xx港币":"Cash available: {money} HKD",
            "使用现金可提不收息。如已开通跨市场交易且关联账户有欠款，则购买力会相应减少，具体请以此认购页面提示的金额为准。":"No interest is charged on the use of cash. If cross-market transactions have been opened and the relevant accounts are in arrears, the purchasing power will be reduced accordingly. See the amount shown on the subscription page. ",
            "预计认购将仅使用到账户资金xx港币（不含手续费）":"It is expected that the subscription will use {money} HKD in account funds (excluding handling fees)",
            "其中预计将使用到富途融资xx港币":"Estimated Futu Financing Amount {money} HKD",
            "预计认购将使用到富途融资xx港币":"Estimated Futu Financing Amount {money} HKD",
            "认购股数":"Number of Shares",
            "请选择认购股数":"Please select the number of shares",
            "可用现金不足":"Insufficient cash available",
            "可用金额不足":"Insufficient cash available",
            "至少需使用账户资金：xx港币":"Use at least account funds:{money} HKD",
            "使用银行融资":"Use bank financing",
            "年利率xx%":"Annual interest rate {num} %",
            "1. 使用银行融资=认购金额-使用账户资金2. 银行融资利息=使用银行融资金额 * 计息日 * 日利率3. 预计计息日为xx天，计息时长为富途截止认购后一自然日到公布中签前一自然日": "1.Use bank financing=Subscription amount - use account funds.<br>2.Bank financing interest rate = use of bank financing amount * interest days * daily interest rate.<br>3.The estimated number of days to calculate interest is {day} days, specifically: the first natural day after the subscription is completed and the natural day before the announcement.",
            "剩余银行融资额度紧张":"The remaining bank financing is tense",
            "下一步，确认明细":"Next",
            "现金认购已经截止":"Cash subscriptions have been closed",
            "融资认购已经截止":"Financing subscriptions have been closed",
            "请先输入使用账户资金金额":"Please enter the amount of funds using account first",
            "超出最大可使用的金额":"Exceeding the maximum usable amount",
            "使用的账户资金不足所需最小额":"The minimum amount of account funds used is insufficient.",
            "使用的账户资金小于申请认购的最低额":"The account funds used are less than the minimum amount to apply for.",
            "融资认购不能修改为现金认购":"Financing subscription cannot be modified to cash subscription",
            "开通融资账户后即可使用此方式":"This method can be used after opening financing account",
            "完成开通":"Completed opening",
            "不支持修改为0本金认购":"Does not support modification to zero asset subscription",
            "港股融资账户":"HK Account",
            "请选择港股融资账户进行认购，即可享受0本金认购特权":"Please choose Hong Kong stock financing {desc} to subscribe，you can enjoy the zero asset subscription privilege",
            "xx股xx港币":"{num} Shares {money} HKD",
            "抱歉您的证券账户尚未开通，暂时无法新股认购":"Sorry, your securities account has not yet been opened, and it is temporarily unable to subscribe for new shares.",
            "您已申请认购该支股票，若需要修改，请在认购记录列表中先撤销后重新提交申请":"You have applied to subscribe for this stock. If you need to modify it, please re-submit the application after canceling it in the list of subscription records.",
            "查看":"Views",
            "银行融资认购修改已于xx时间结束，当前时间已不支持修改认购":"Bank financing subscription modification has ended at {time}, and the current time does not support modification of subscription",
            "您已申请认购该支股票，查看任务详情":"You have applied for the stock to view the mission details",
            "银行融资认购只支持追加，修改后您使用银行融资的金额不得少于xx港币":"Bank financing subscriptions only support an increase, and the amount of bank financing used after modification is not less than {money} HKD"
        }
    }
</i18n>
<template>
    <div class="wrapper ipo-apply-wrapper">
        <!-- 头 -->
        <p class="ui-title pc-title-wrapper"><span class="ui-title-font">{{$t('新股认购')}}</span><span class="ui-title-link"><a href="/history">{{$t('认购记录')}}</a></span></p>
        <!-- 未开户 -->
        <div class="ui-alert ui-alert-warning" v-if="!isSetup">{{$t('抱歉您的证券账户尚未开通，暂时无法认购新股。')}}<a :href="'//' + domain.futu5 + '/setup'">{{$t('立即开通账户')}}</a></div>
        <!-- 暗盘 -->
        <div class="ui-alert"><i class="ui-badge ui-icon icon-sound"></i><span class="ui-alert-info"><a :href="'//' + domain.futunn + '/act/detail?id=' + darkId" target="_blank">{{$t('新股认购、暗盘交易提醒功能已上线，点击查看详情。')}}</a></span></div>
        <div class="wrapper ui-form order-form">
            <!-- 股票 -->
            <div class="wrapper ui-form-item from-group">
                <div class="container">
                    <div class="form-label"><label>{{$t('新股名称')}}</label></div>
                    <div class="container form-container">
                        <div class="wrapper use-stock">
                            <span class="txt">{{stock.stockDesc}}</span>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 账户 -->
            <div class="wrapper ui-form-item from-group" v-if="!render.isOnlyOneMarginAccount">
                <div class="container">
                    <div class="form-label"><label>{{$t('认购账户')}}</label></div>
                    <div class="container form-container">
                        <div class="form-content" v-if="render.isCanSelectAccount">
                            <div class="ui-select" :class="{show:selectStatus.account}">
                                <div class="ui-select-group">
                                    <input class="ui-select-input unselect" readonly type="text" :placeholder="$t('请选择认购账户')" @click="switchAccountSelect" v-model="account.accountDesc">
                                    <span class="ui-select-arrow" @click="switchAccountSelect"><span class="ui-icon icon-arrow01-down"></span><span class="ui-icon icon-arrow01-up"></span></span>
                                </div>
                                <ul class="ui-select-menu" :class="{show:selectStatus.account}">
                                    <li class="ui-select-option" v-for="account in accountList" :key="account.accountId" @click="selectAccount(account.accountId)">{{account.accountDesc}}</li>
                                </ul>
                            </div>
                        </div>
                        <div class="wrapper use-account" v-else>
                            <span class="txt">{{account.accountDesc}}</span>
                        </div>
                        <div class="wrapper form-tips up-account" v-if="account && account.accountId && !account.isMargin">
                            <a :href="'//' + domain.futu5 + '/setup/promote/?market=hk&account_id=' + account.accountId">{{$t('免费升级融资账户')}}</a> <span>{{$t('可提升中签率')}}</span>
                            <tips :tipsTxt="$t('认购股数越多中签率越高，升级融资账户后您可以通过使用融资来申购更多股数。')" />
                        </div>
                    </div>
                </div>
            </div>
            <!-- 截止日 -->
            <div class="wrapper ui-form-item from-group" v-if="render.isNeedShowLimitTime">
                <div class="container">
                    <div class="form-label"><label>{{$t('认购截止')}}</label></div>
                    <div class="container form-container">
                        <div class="wrapper limit-time" v-if="render.isNeedShowLimitEndTime"><span>{{$t('剩余')}}</span> <span class="yl">{{limitDate(limitStatus.limitEndTime ,$t('dd天HH小时mm分'))}}</span></div>
                        <div class="wrapper limit-time" v-if="render.isNeedShowLimitEnd"><span class="small">{{$t('现金认购已于xx时间截止' , {time: formatDate(stock.endTime)})}}</span></div>
                        <div class="wrapper limit-time pt0" v-if="render.isNeedShowLimitMarginTime"><span>{{$t('剩余')}}</span> <span class="yl">{{limitDate(limitStatus.limitMarginTime , $t('dd天HH小时mm分'))}}</span><span class="small">{{$t('（使用银行融资）')}}</span></div>
                        <div class="wrapper limit-time pt0" v-if="render.isNeedShowLimitMargin"><span class="small">{{$t('银行融资已于xx时间截止' , {time: formatDate(stock.marginEndTime)})}}</span></div>
                    </div>
                </div>
            </div>
            <!-- buy type -->
            <div class="wrapper ui-form-item from-group">
                <div class="container">
                    <div class="form-label"><label>{{$t('认购方式')}}</label></div>
                    <div class="container form-container buy-type-wrapper">
                        <div class="wrapper">
                            <span class="buy-type mr12" :class="{active:render.currentApplyType === applyType.CASH_TYPE , disable:!render.isCanApplyByCash}"
                                                        @click="selectApplyType(applyType.CASH_TYPE)">{{$t('现金认购')}}</span>
                            <span class="buy-type" v-if="(!stock.isSupportMagrin || !stock.isHasMarginAvailableAmount) && account.isMargin"
                                                        :class="{active:render.currentApplyType === applyType.FUTU_TYPE, disable:!render.isCanApplyByFutu}"
                                                        @click="selectApplyType(applyType.FUTU_TYPE)">{{$t('富途融资认购')}}</span>
                            <span class="buy-type" v-else
                                                        :class="{active:render.currentApplyType === applyType.MARGIN_TYPE, disable:!render.isCanApplyByMargin}"
                                                        @click="selectApplyType(applyType.MARGIN_TYPE)">{{$t('融资认购')}}</span>
                            <div class="zero-container" v-if="stock.isSupportZeroAsset" @click="selectApplyType(applyType.ZERO_TYPE)">
                                <span class="buy-type" :class="{active:render.currentApplyType === applyType.ZERO_TYPE, disable:!render.isCanApplyByZero}" >{{$t('0本金认购')}}<span class="buy-zero-tips">{{$t('特权用户尊享')}}</span></span>
                            </div>
                        </div>
                        <div class="wrapper form-tips" v-if="render.isMarginEnd">
                           <span>{{$t('xx倍银行融资认购已截止' , {num: formatNumber(stock.marginLeverage)})}}</span>
                        </div>
                        <div class="wrapper form-tips" v-if="render.isMarginEndEarly">
                           <span>{{$t('xx倍银行融资认购已提前截止' , {num: formatNumber(stock.marginLeverage)})}}</span>
                        </div>
                        <div class="wrapper form-tips" v-if="!render.isCanUseMargin">
                           <span>{{$t('认购可用金额不足xx港币，无法使用xx倍杠杆' , {money: formatNumber((stock.marginApplyThresholdAmount || 0) / 1000 + 100 , 2) , num: formatNumber(stock.marginLeverage)})}}  <a :href="'//' + domain.helpFutu5 + '/faq/topic2300'">{{$t('查看详情')}}</a></span>
                        </div>
                        <div class="wrapper form-tips" v-if="render.isZeroEndEarly">
                            <span>{{$t('0本金认购因额度紧张已提前截止')}}</span>
                        </div>
                        <div class="wrapper form-tips" v-if="render.currentApplyType === applyType.FUTU_TYPE || render.currentApplyType === applyType.MARGIN_TYPE">
                            <span class="yl" v-if="stock.isSupportMagrin">{{$t('该新股支持xx倍银行融资认购' , {num: formatNumber(stock.marginLeverage)})}}</span>
                            <span class="yl" v-else>{{$t('该新股不支持银行融资，超出可提部分将使用富途融资')}}</span>
                        </div>
                    </div>
                </div>
            </div>
            <!-- cash -->
            <div class="wrapper ui-form-item from-group" :class="{'ui-error':cashPart.isNotValidate}" v-if="render.currentApplyType !== applyType.ZERO_TYPE">
                <div class="container">
                    <div class="form-label">
                        <label v-if="render.currentApplyType === applyType.CASH_TYPE || render.currentApplyType === 0">{{$t('可用现金')}}</label>
                        <label v-else-if="render.currentApplyType === applyType.MARGIN_TYPE && power.canUseBankMargin">{{$t('使用账户资金')}}</label>
                        <label v-else>{{$t('可用金额')}}</label>
                    </div>
                    <div class="container form-container">
                        <div class="wrapper use-money" v-if="!(render.currentApplyType === applyType.MARGIN_TYPE && power.canUseBankMargin)">
                            <span class="txt">
                                <span>{{$t('xx港币' , {money: formatNumber((power.maxAssetPower || 0) / 1000 , 2)})}}</span>
                                <!--融资账户-融资认购-不支持银行融资-->
                                <span v-if="render.currentApplyType === applyType.FUTU_TYPE || render.currentApplyType === applyType.MARGIN_TYPE">
                                    <tips :tipsTxt="$t('可用金额为可用于新股认购的金额，其中现金可提金额为xx港币。如已开通跨市场交易且关联账户有欠款，则购买力会相应减少，具体请以此认购页面提示的金额为准。' , {money: formatNumber((power.availableCash || 0) / 1000 , 2)})  + '<a href=//' + domain.helpFutu5 + '/faq/topic2291>' + $t('查看详情') + '</a>'" />
                                </span>
                                <!--现金账户现金认购-->
                                <span v-if="render.currentApplyType === applyType.CASH_TYPE && !account.isMargin">
                                    <tips v-if="power.canUseUnsettled" :tipsTxt="$t('可用现金为当前账户的现金金额')" />
                                    <tips v-else :tipsTxt="$t('可用现金为当前账户可用于现金认购的现金可提，可能小于客户端界面展示的最大可提金额，请以此认购页面提示的金额为准。')" />
                                </span>
                                <!--融资账户现金认购-->
                                <span v-if="render.currentApplyType === applyType.CASH_TYPE && account.isMargin">
                                    <tips :tipsTxt="$t('可用现金为可用于新股认购的金额，可能大于现金可提，如已开通跨市场交易且关联账户有欠款，则购买力会相应减少。具体请以此认购页面提示的金额为准。')" />
                                </span>
                            </span>
                        </div>
                        <div class="form-content" v-else>
                            <input type="text" class="ui-form-text"
                                    v-model="cashPart.cash"
                                    v-if="power && power.minAssetPower !== power.maxAssetPower"
                                    @change="checkCash"
                                    @keyup="checkCash"
                                    :placeholder="$t('可输入区间：xx~xx' , {min: formatNumber((power.minAssetPower || 0 ) / 1000 , 2) , max: formatNumber((power.maxAssetPower || 0 ) / 1000 , 2)})">
                            <input type="text" class="ui-form-text"
                                    v-model="cashPart.cash"
                                    v-else
                                    @change="checkCash"
                                    @keyup="checkCash"
                                    :placeholder="$t('最大可用：xx' , {money: formatNumber((power.minAssetPower || 0 ) / 1000 , 2)})">
                        </div>
                        <div class="wrapper form-tips" v-if="render.currentApplyType === applyType.MARGIN_TYPE && power.canUseBankMargin">
                            <span>{{$t('现金可提：xx港币' , {money: formatNumber((power.availableCash || 0) / 1000 , 2)})}}</span>
                            <tips :tipsTxt="$t('使用现金可提不收息。如已开通跨市场交易且关联账户有欠款，则购买力会相应减少，具体请以此认购页面提示的金额为准。') + '<a href=//' + domain.helpFutu5 + '/faq/topic2291>' + $t('查看详情') + '</a>'" />
                        </div>
                        <div class="wrapper form-tips" v-if="render.currentApplyType === applyType.MARGIN_TYPE && power.canUseBankMargin && applyData.isFullCash">
                            <span class="yl">{{$t('预计认购将仅使用到账户资金xx港币（不含手续费）' , {money: formatNumber(((applyData.cashPart || 0) + (applyData.assetMargin || 0)) / 1000 , 2)})}}</span>
                        </div>
                        <div class="wrapper form-tips" v-if="applyData.assetMargin">
                            <span class="yl" v-if="(+cashPart.cash > (+applyData.buyAmount / 1000))">{{$t('其中预计将使用到富途融资xx港币' , {money: formatNumber((applyData.assetMargin || 0) / 1000)})}}</span>
                            <span class="yl" v-else>{{$t('预计认购将使用到富途融资xx港币' , {money: formatNumber((applyData.assetMargin || 0) / 1000)})}}</span>
                        </div>
                    </div>
                </div>
                <p class="ui-form-tips4error">{{cashPart.errorTxt}}</p>
            </div>
            <!-- stock num -->
            <div class="wrapper ui-form-item from-group">
                <div class="container">
                    <div class="form-label"><label>{{$t('认购股数')}}</label></div>
                    <div class="container form-container">
                        <div class="form-content">
                            <div class="ui-select" :class="{show:selectStatus.buyCount}">
                                <div class="ui-select-group">
                                    <input class="ui-select-input unselect" readonly type="text" :placeholder="$t('请选择认购股数')" @click="switchBuyCountSelect" v-model="buyCount.lotInfoDesc">
                                    <span class="ui-select-arrow" @click="switchBuyCountSelect"><span class="ui-icon icon-arrow01-down"></span><span class="ui-icon icon-arrow01-up"></span></span>
                                </div>
                                <ul class="ui-select-menu" :class="{show:selectStatus.buyCount}" id="J_buyCountSelector">
                                    <li class="ui-select-option" v-for="lotInfoI in power.lotInfo"
                                                                :key="lotInfoI.stockNum"
                                                                :class="{disable:isNeedDisable(lotInfoI.minStockAssetPower , lotInfoI.stockPrice)}"
                                                                @click="selectBuyCount(lotInfoI.stockNum)">
                                        <div class="wrapper">{{lotInfoI.lotInfoDesc}}</div>
                                        <div class="wrapper lot-tips cash-tips" v-if="render.currentApplyType === applyType.CASH_TYPE">{{$t('可用现金不足')}}</div>
                                        <div class="wrapper lot-tips cash-tips" v-if="render.currentApplyType === applyType.FUTU_TYPE || (render.currentApplyType === applyType.MARGIN_TYPE && !power.canUseBankMargin)">{{$t('可用金额不足')}}</div>
                                        <div class="wrapper lot-tips" v-if="render.currentApplyType === applyType.MARGIN_TYPE && power.canUseBankMargin" >{{$t('至少需使用账户资金：xx港币' , {money: formatNumber(lotInfoI.minStockAssetPower / 1000 , 2)})}}</div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- margin -->
            <div class="wrapper ui-form-item from-group" v-if="(render.currentApplyType === applyType.MARGIN_TYPE && power.canUseBankMargin) || render.currentApplyType === applyType.ZERO_TYPE">
                <div class="container">
                    <div class="form-label"><label>{{$t('使用银行融资')}}</label></div>
                    <div class="container form-container">
                        <div class="wrapper use-money">
                            <span class="txt"><span class="yl">{{formatNumber((applyData.marginPart || 0) / 1000 , 2)}}</span> {{$t('港币')}}</span>
                        </div>
                        <div class="wrapper form-tips">
                            <span>{{$t('年利率xx%' , {num: formatNumber((stock.marginInterest || 0) / 1000 , 2)})}}</span>
                            <tips :tipsTxt="$t('1. 使用银行融资=认购金额-使用账户资金2. 银行融资利息=使用银行融资金额 * 计息日 * 日利率3. 预计计息日为xx天，计息时长为富途截止认购后一自然日到公布中签前一自然日' , {day: stock.marginInterestDays || 0}) + '<a href=//' + domain.helpFutu5 +'/faq/topic2294>' + $t('查看详情') + '</a>'"></tips>
                        </div>
                        <div class="wrapper form-tips" v-if="render.currentApplyType === applyType.MARGIN_TYPE && stock.isMarginDanger">
                            <span class="yl">{{$t('剩余银行融资额度紧张')}}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="ipo-next-container">
            <div class="next-container">
                <button class="ui-btn" :disabled="!isSetup || !isCanSubmit" @click="apply">{{$t('下一步，确认明细')}}</button>
            </div>
        </div>
        <notice></notice>
        <ui-loading></ui-loading>
        <ui-dialog></ui-dialog>
        <ui-light-dialog></ui-light-dialog>
    </div>
</template>
<script>
import {mapState} from 'vuex';
{{#xhr}}
import * as xhr from '@futuweb/tool-xhr2';
{{/xhr}}
import formatNumber from '../../utils/format-number';
import formatDate from '../../utils/format-date';
import limitDate from '../../utils/limit-date';
import getUrlKey from '../../utils/get-url-key';
import {formatNumberFloorByBit , formatNumberCeilByBit} from '../../utils/high-precision-number';

import {checkResponse , handlerError} from '../../lib/response';

import uiLoading from '../common/loading.vue';
import uiDialog from '../common/dialog.vue';
import uiLightDialog from '../common/light-dialog.vue';
import tips from '../common/tips.vue';
import notice from './notice.vue';

import {CASH_TYPE , FUTU_TYPE , MARGIN_TYPE , ZERO_TYPE , MAX_LEN} from './enum';

const params = window._params || {};

let {futunn , futu5 , myFutu5 , helpFutu5} = params;

const LIMIT_DATE_TIME = 86400000;

export default {
    name:'ipo-apply',
    data(){
        return {
            //是否开户
            isSetup: params.isSetup,
            //是否可以提交数据
            isCanSubmit: false,
            //暗盘交易
            darkId: +params.lang === 1 ? 1412 : 1406,
            //域名
            domain: {futunn , futu5 , myFutu5 , helpFutu5},
            //新股信息
            stock: {
                stockCode: '',
                stockDesc: '--'
            },
            //账户列表
            accountList: [],
            //认购类型
            applyType: {CASH_TYPE , FUTU_TYPE , MARGIN_TYPE , ZERO_TYPE},
            //认购详情
            detail:false,
            //购买力
            power:false,
            //账户
            account: {
                accountId:'',
                accountDesc:'--'
            },
            //金额
            cashPart: {
                cash: '',
                errorTxt: '',
                isNotValidate: false
            },
            //数量
            buyCount: {
                lotInfoDesc:''
            },
            //选择状态
            selectStatus:{
                account: false,
                buyCount: false
            },
            //倒计时
            limitStatus:{
                endTimePromise : null,
                marginEndTimePromise : null,
                limitEndTime:0,
                limitMarginTime: 0,
                speed: 60 * 1000
            },
            //render 页面展示渲染条件
            render:{
                isCanSelectAccount: false, //是否可以修改账户
                isOnlyOneMarginAccount: false, //是否只有一个融资账户，如果是：则不展示账户列

                isNeedShowLimitTime: false,
                isNeedShowLimitEndTime: false, //展示普通认购倒计时
                isNeedShowLimitEnd:false,  //已到普通认购时间
                isNeedShowLimitMarginTime: false, //展示融资认购倒计时
                isNeedShowLimitMargin: false, //融资认购已经到期

                currentApplyType: 0,   //当前认购类型： 1: 现金认购 ;2：富途融资; 3: 银行融资; 4:0本金认购
                isCanApplyByCash: true, //是否可以现金认购
                isCanApplyByFutu: false,
                isCanApplyByMargin: true,
                isCanApplyByZero: false,

                isCanGetAssetPower: !!params.isSetup, //是否可以获取购买力

                isMarginEnd: false, //融资认购截止
                isMarginEndEarly: false, //融资认购提前截止
                isCanUseMargin: true, //是否可以使用融资
                isZeroEndEarly: false, //0本金认购提前截止

                isCanModify: true //是否可以修改
            },
            //认购数据
            applyData: false
        };
    },
    computed: mapState(['applyInfo']),
    methods:{
        limitDate,
        formatDate,
        formatNumber,
        isNeedDisable(assetPower , stockPrice){
            //0本金认购
            if ( this.render.currentApplyType === ZERO_TYPE ) {
                return Math.round((this.cashPart.cash || 0) * 100) * 10 < +stockPrice || !this.power.canUseBankMargin || !this.stock.isHasZeroAssetAvailableAmount ? true : false;
            }
            return Math.round((this.cashPart.cash || 0) * 100) * 10 < +assetPower || this.cashPart.isNotValidate || (this.render.currentApplyType === MARGIN_TYPE && this.power.canUseBankMargin && !this.stock.isHasMarginAvailableAmount) ? true : false;
        },
        getDeltaDays(dateObj1, dateObj2){
            // 先获取当日0点的日期对象，去除时间差异
            dateObj1 = new Date(dateObj1.getFullYear(), dateObj1.getMonth(), dateObj1.getDate(), 0, 0, 0, 0);
            dateObj2 = new Date(dateObj2.getFullYear(), dateObj2.getMonth(), dateObj2.getDate(), 0, 0, 0, 0);
            return Math.round((dateObj2 - dateObj1) / 24 / 3600 / 1000);
        },
        /**
         * [getMarginInterestDays 获取收息日]
         * @return {[type]} [description]
         */
        getMarginInterestDays(deductTime , publishTime){
            let deltaDays = this.getDeltaDays(new Date(+deductTime), new Date(+publishTime));
            if(deltaDays <= 0) return 0;
            return deltaDays;
        },
        /**
         * [getInterestExpense 获取融资利息]
         * @param  {[type]} amount [description]
         * @param  {[type]} stock  [description]
         * @return {[type]}        [description]
         */
        getInterestExpense(amount, stock){
            var deltaDays = this.getMarginInterestDays(stock.deductTime , stock.publishTime);
            return amount * (stock.interest / 100000 / 365) * deltaDays;
        },
        /**
         * [getStockBuyCountInformation 根据股数获取股数信息]
         * @param  {[type]} buyCount [description]
         * @return {[type]}          [description]
         */
        getStockBuyCountInformation(buyCount){
            let lotInfo = void 0;

            if ( this.power.lotInfo ){
                let lotInfoArr = this.power.lotInfo;
                for ( let i = 0 ; i < lotInfoArr.length ; i++ ){
                    if ( +lotInfoArr[i].stockNum === +buyCount && buyCount > 0 ){
                        return Object.assign({} , lotInfoArr[i]);
                    }
                }
            }
            return lotInfo;
        },
        /**
         * [setApplyData 设置选择数据]
         */
        setApplyData(){
            console.log('[setApplyData] set ApplyData ....');

            //先获取认购金额 ， 最小购买力
            let lotInfo = this.getStockBuyCountInformation(this.buyCount.stockNum || 0);
            //获取不到，金额不足不能认购
            if ( !lotInfo || Math.round((this.cashPart.cash || 0) * 100) * 10 < lotInfo.minStockAssetPower || this.checkCashPartIsNotValidate() ){
                return this.resetApplyData();
            }
            console.log('[setApplyData] set ApplyData ok i will set ipo form data....');

            //0本金认购直接使用最小值
            let cashPart = this.render.currentApplyType === ZERO_TYPE ? lotInfo.minStockAssetPower : Math.max(Math.round(+this.cashPart.cash * 100) * 10 , 0);

            this.applyData = {};
            //股票id
            this.applyData.stockId = this.stock.stockId;
            //账户id
            this.applyData.accountId = this.account.accountId;
            //购买数量
            this.applyData.buyCount = this.buyCount.stockNum;
            //认购金额
            this.applyData.buyAmount = lotInfo.stockPrice;
            //认购类型
            this.applyData.isMarginIpo = lotInfo.stockPrice > cashPart ? 1 : 0;
            //手续费
            this.applyData.fee = this.applyData.isMarginIpo ? +this.stock.marginFee : +this.stock.cashFee;
            //现金部分
            this.applyData.cashPart = Math.min(+this.power.availableCash , lotInfo.stockPrice , cashPart);
            //账户融资
            this.applyData.assetMargin = Math.max(Math.min(lotInfo.stockPrice , cashPart) - +this.power.availableCash , 0);
            //银行融资
            this.applyData.marginPart = Math.max(lotInfo.stockPrice - cashPart , 0);
            //利息
            this.applyData.expense = this.getInterestExpense(this.applyData.marginPart , this.stock);

            //使用金额超过认购金额
            this.applyData.isFullCash = cashPart > lotInfo.stockPrice ? 1 : 0;

            //认购选择类型
            this.applyData.applyType = this.render.currentApplyType;

            //0本金认购
            this.applyData.zeroAsset = this.render.currentApplyType === ZERO_TYPE ? 1 : 0;

            //任务id
            this.applyData.tid = this.detail ? this.detail.tid : 0;

            //可以提交
            this.isCanSubmit = true;

            console.log('[setApplyData] set ApplyData is .... ' , this.applyData);
        },
        /**
         * 最后确认是否可以提交
        */
        checkIsCanApply(){
            if ( this.applyData.isMarginIpo === 0 && this.limitStatus.limitEndTime <= 0 ){
                this.$store.commit('showDialog' , this.$t('现金认购已经截止'));
                return false;
            }
            if ( this.applyData.isMarginIpo === 1 && this.limitStatus.limitMarginTime <= 0 ){
                this.$store.commit('showDialog' ,this.$t('融资认购已经截止'));
                return false;
            }
            //修改融资认购的情况
            if ( this.detail && this.detail.marginPart && (this.applyData.marginPart < this.detail.marginPart) && !this.detail.zeroAsset ){
                this.$store.commit('showDialog' ,this.$t('银行融资认购只支持追加，修改后您使用银行融资的金额不得少于xx港币' , {
                    money: this.formatNumber(this.detail.marginPart / 1000 , 2)
                }));
                return false;
            }
            console.log('[checkIsCanApply] can submit .... ' , this.applyData);
            return true;
        },
        /**
         * 金额不对，股数选择错误，重置认购数据
        */
        resetApplyData(){
            this.applyData = false;
            this.buyCount = false;
            this.isCanSubmit = false;
        },
        /**
         * 验证输入金额格式
        */
        checkCash(){
            this.cashPart.cash = ('' + this.cashPart.cash).replace(/[^0-9.]/g , '');

            let cashArr = this.cashPart.cash.split('.');

            cashArr[0] = cashArr[0].replace(/^(0)+/ , cashArr.length > 1 || cashArr[0] === '0' ? '0' : '');
            cashArr[0] = cashArr[0].substr(0 , MAX_LEN);

            if( cashArr.length >= 2 ){
                this.cashPart.cash = cashArr[0] + '.' + ('' + cashArr[1]).substr(0,2);
            }else{
                this.cashPart.cash = cashArr[0] === '' ? '' : +cashArr[0] + '';
            }
            //验证通过
            if ( !this.checkCashPartIsNotValidate() ){
                return this.setApplyData();
            }
            return this.resetApplyData();
        },
        /**
         * 金额是否输入在合理范围内
        */
        checkCashPartIsNotValidate(){
            let cash = this.cashPart.cash;

            //存在融资
            if ( this.render.currentApplyType === MARGIN_TYPE && this.power.canUseBankMargin ){
                //没有输入
                if ( ('' + cash).trim() === '' || cash === void 0 || !Number.isFinite(+cash) ){
                    this.cashPart.errorTxt = this.$t('请先输入使用账户资金金额');
                    return this.cashPart.isNotValidate = true;
                }
                cash = Math.round(+cash * 100) * 10;
                //输入过多
                if ( cash > this.power.maxAssetPower ){
                    this.cashPart.errorTxt = this.$t('超出最大可使用的金额');
                    return this.cashPart.isNotValidate = true;
                }
                //不能认购任何一手
                if ( this.isCantBuyAnyOne(this.power.maxAssetPower || 0) || !this.power ){
                    this.cashPart.errorTxt = this.$t('使用的账户资金不足所需最小额');
                    return this.cashPart.isNotValidate = true;
                }
                //输入过小
                if ( cash < this.power.minAssetPower ){
                    this.cashPart.errorTxt = this.$t('使用的账户资金小于申请认购的最低额');
                    return this.cashPart.isNotValidate = true;
                }
            }else{ //不存在融资
                if ( this.isCantBuyAnyOne(Math.round((this.power.maxAssetPower || 0) * 100) * 10) || !this.power || !Number.isFinite(+cash) ){
                    if ( !this.account.isMargin ){ //现金认购
                        this.cashPart.errorTxt = this.$t('可用现金不足');
                    }else { //融资账户认购
                        this.cashPart.errorTxt = this.$t('可用金额不足');
                    }
                    return this.cashPart.isNotValidate = true;
                }
            }
            //验证通过
            this.cashPart.errorTxt = '';
            return this.cashPart.isNotValidate = false;
        },
        /**
         * [isCantBuyAnyOne 资金够不够]
         * @return {Boolean} [description]
         */
        isCantBuyAnyOne(cashPart){
            let lotInfo = this.power.lotInfo;
            if ( lotInfo ){
                for( let i = 0 ; i < lotInfo.length ; i++ ){
                    if ( lotInfo[i].minStockAssetPower <= cashPart ){
                        return false;
                    }
                }
            }
            return true;
        },
        checkApplyTips(){
            //1.融资时间已到 && 认购方式为融资的时候展示
            if ( !this.stock.isSupportMagrin && this.stock.marginEndTime && ( this.render.currentApplyType === FUTU_TYPE || this.render.currentApplyType === MARGIN_TYPE) ){
                this.render.isMarginEnd = true;
            }else {
                this.render.isMarginEnd = false;
            }
            //2.融资认购提前截止 认购没有截止，融资池没钱了，或者用户不能使用银行的钱
            if ( this.stock.isSupportMagrin && !this.stock.isHasMarginAvailableAmount && ( this.render.currentApplyType === FUTU_TYPE || this.render.currentApplyType === MARGIN_TYPE) &&
                 (this.power && !this.power.canUseBankMargin) ){
                this.render.isMarginEndEarly = true;
            }else{
                this.render.isMarginEndEarly = false;
            }
            //3. 融资池有钱，但是自己钱太少，撬不动杠杠
            let isHasMarginApplyThresholdAmount = this.power && this.power.maxAssetPower - this.stock.marginFee >= this.stock.marginApplyThresholdAmount ? true : false;
            if ( this.stock.isSupportMagrin && this.stock.isHasMarginAvailableAmount && ( this.render.currentApplyType === FUTU_TYPE || this.render.currentApplyType === MARGIN_TYPE) &&
                 (this.power && !this.power.canUseBankMargin) && !isHasMarginApplyThresholdAmount ){
                this.render.isCanUseMargin = false;
            }else{
                this.render.isCanUseMargin = true;
            }
            //3. 0本金认购没钱了  股票支持0本金
            if ( this.stock.isSupportZeroAsset && this.render.currentApplyType === ZERO_TYPE && ((this.power && !this.power.canUseBankMargin) || !this.stock.marginApplyThresholdAmount) ){
                this.render.isZeroEndEarly = true;
            }else{
                this.render.isZeroEndEarly = false;
            }
            console.log('[checkApplyTips] apply tips is here.' , this.render);
        },
        selectApplyType(type){
            //正在获取购买力，不让切换
            if ( !this.render.isCanGetAssetPower ){
                return;
            }
            console.log('[selectApplyType] apply type:' , type);
            //融资认购不能修改为现金认购
            if ( type === CASH_TYPE && !this.render.isCanApplyByCash ){
                return this.$store.commit('showDialog' , {
                    isCancel:false,
                    message: this.$t('融资认购不能修改为现金认购')
                });
            }
            //现金账户。打算融资认购
            if ( type === MARGIN_TYPE && !this.render.isCanApplyByMargin ){
                return this.$store.commit('showDialog' , {
                    isCancel:false,
                    message: this.$t('开通融资账户后即可使用此方式'),
                    sub:this.$t('完成开通'),
                    callBack: ()=>window.location.href = '//' + this.domain.futu5 + '/setup/promote/?market=hk&account_id=' + this.account.accountId
                });
            }
            //0本金
            if ( type === ZERO_TYPE && !this.render.isCanApplyByZero ){
                //其它任务不能改为0本金
                if ( this.detail ){
                    return this.$store.commit('showDialog' , {
                        isCancel:false,
                        message: this.$t('不支持修改为0本金认购')
                    });
                }
                //需要指定账户进行认购
                let account = this.getAccontByAccountId(this.stock.zeroAssetAccountId) || this.$t('港股融资账户');
                return this.$store.commit('showDialog' , {
                    isCancel:false,
                    message: this.$t('请选择港股融资账户进行认购，即可享受0本金认购特权' , {desc: account.accountDesc})
                });
            }

            //1. 现金账户
            //2. 富途融资  assetMargin && !marginPart
            //3. 银行融资  marginPart || (assetMargin && !marginPart)
            //4. 0 本金认购  zeroAsset
            if ( (type === CASH_TYPE && this.render.isCanApplyByCash) ||
                (type === FUTU_TYPE && this.render.isCanApplyByFutu) ||
                (type === MARGIN_TYPE && (this.render.isCanApplyByFutu || this.render.isCanApplyByMargin)) ||
                (type === ZERO_TYPE && this.render.isCanApplyByZero) ){
                    this.render.currentApplyType = type;
                    return this.getApplyAssetPower(this.render.currentApplyType);
            }
        },
        checkApplyType(){
            //1.如果没有任务 , 选择现金认购

            //2.如果有任务[1,2] ， 选中任务认购类型
            //2.1. 现金账户
            //2.2. 富途融资  assetMargin && !marginPart
            //2.3. 银行融资  marginPart
            //2.4. 0 本金认购  zeroAsset

            //3.1 不存在任务 isCanApplyByCash = true
            //3.2 存在任务  isCanApplyByCash = type === 1 ? true : false

            //4. 融资：   非融资账户 || 0本金认购  不可选
            //4.1 富途融资   isCanApplyByFutu  不支持银行融资 || 融资额度为0
            //4.2 银行融资

            //5. 0本金认购
            //5.1 (融资账户 && 账户 === stock.zeroAssetAccountId) || 任务本身为0本金任务

            //6.1. 0本金不可修改为其它类型
            //6.2. 融资认购不可修改
            //6.3. 现金账户不能进行融资认购

            if ( !this.detail ){
                this.render.currentApplyType = CASH_TYPE;
            }else {
                if ( this.detail.zeroAsset ){
                    this.render.currentApplyType = ZERO_TYPE;
                }else if( this.detail.marginPart ){
                    this.render.currentApplyType = MARGIN_TYPE;
                }else if ( this.detail.assetMargin ){
                    //富途融资任务：支持银行融资，展示银行融资 ，否则只展示富途融资
                    this.render.currentApplyType = this.stock.isSupportMagrin && this.stock.isHasMarginAvailableAmount ? MARGIN_TYPE : FUTU_TYPE;
                }else {
                    this.render.currentApplyType = CASH_TYPE;
                }
            }

            //现金认购
            if ( !this.detail || this.render.currentApplyType === CASH_TYPE ){
                this.render.isCanApplyByCash = true;
            }else{
                this.render.isCanApplyByCash = false;
            }
            //富途融资  ， 银行融资
            if ( !this.account.isMargin || ( this.detail && this.detail.zeroAsset) ){
                this.render.isCanApplyByFutu = false;
                this.render.isCanApplyByMargin = false;
            }else{
                this.render.isCanApplyByFutu = true;
                if ( this.stock.isSupportMagrin && this.stock.isHasMarginAvailableAmount ){
                    this.render.isCanApplyByMargin = true;
                }else{
                    this.render.isCanApplyByMargin = false;
                }
            }
            //0本金
            if ( (this.account.isMargin && this.account.accountId === this.stock.zeroAssetAccountId && !this.detail) || (this.detail && this.detail.zeroAsset) ){
                this.render.isCanApplyByZero = true;
            }else{
                this.render.isCanApplyByZero = false;
            }

            console.log('[check] apply type is here.' , this.render);
        },
        checkLimitTime(){
            //1. 普通认购未截止，并且小于 1天
            //2. 融资认购未截止，并小于 1 天
            //3. 普通认购已截止，融资认购未截止
            //4. 融资认购已截止，普通认购未截止
            if ( (this.limitStatus.limitEndTime && this.limitStatus.limitEndTime < LIMIT_DATE_TIME) ||
                (this.limitStatus.limitMarginTime && this.limitStatus.limitMarginTime < LIMIT_DATE_TIME) ||
                (!this.limitStatus.limitEndTime && this.stock.endTime && this.limitStatus.limitMarginTime) ||
                (!this.limitStatus.limitMarginTime && this.stock.marginEndTime && this.limitStatus.limitEndTime) ){
                this.render.isNeedShowLimitTime = true;
            }else{
                this.render.isNeedShowLimitTime = false;
            }
            // 普通认购小于一天 || 融资认购小于一天
            if ( this.limitStatus.limitEndTime && ( this.limitStatus.limitEndTime < LIMIT_DATE_TIME || (this.stock.marginEndTime && this.limitStatus.limitMarginTime < LIMIT_DATE_TIME) ) ){
                this.render.isNeedShowLimitEndTime = true;
            }else{
                this.render.isNeedShowLimitEndTime = false;
            }
            //普通认购已到期 && 融资账户 && 股票支持融资
            if ( !this.limitStatus.limitEndTime && this.account.isMargin && this.stock.isSupportMagrin ){
                this.render.isNeedShowLimitEnd = true;
            }else{
                this.render.isNeedShowLimitEnd = false;
            }
            //融资认购未到期 && （融资认购小于1天 ||（普通认购小于1天 && 融资账户 && 普通认购时间!= 融资认购时间 && 股票支持融资））
            if ( this.limitStatus.limitMarginTime && ( this.limitStatus.limitMarginTime < LIMIT_DATE_TIME || (this.stock.endTime && this.limitStatus.limitEndTime < LIMIT_DATE_TIME ) ) &&
                this.limitStatus.limitEndTime !== this.limitStatus.limitMarginTime && this.account.isMargin && this.stock.isSupportMagrin ){
                this.render.isNeedShowLimitMarginTime = true;
            }else{
                this.render.isNeedShowLimitMarginTime = false;
            }
            //融资认购已到期 && 融资账户 && 股票支持融资
            if ( !this.limitStatus.limitMarginTime && this.account.isMargin && this.stock.marginEndTime ){
                this.render.isNeedShowLimitMargin = true;
            }else{
                this.render.isNeedShowLimitMargin = false;
            }
            console.log('[checkLimitTime] this limit status: ' , this.render);
        },
        checkAccountCanSelect(){
            //1. 不可选
            //1.1. 单个账户 || 存在任务
            if ( this.accountList.length <= 1 || this.detail ){
                this.render.isCanSelectAccount = false;
            }else{
                this.render.isCanSelectAccount = true;
            }
        },
        checkIsOnlyOneMarginAccount(){
            //是否只有一个融资账户
            if ( this.accountList.length === 1 && this.accountList[0].isMargin ){
                this.render.isOnlyOneMarginAccount = true;
            }else{
                this.render.isOnlyOneMarginAccount = false;
            }
        },
        /**
         * 倒计时
        */
        runLimitTime(){
            let self = this;
            self.limitStatus.endTimePromise = setInterval(()=>{
                if ( self.limitStatus.limitEndTime <= 1000 ){
                    clearInterval(self.limitStatus.endTimePromise);
                    self.limitStatus.limitEndTime = 0;
                    return self.checkLimitTime();
                }
                self.limitStatus.limitEndTime = Math.max(self.limitStatus.limitEndTime - self.limitStatus.speed , 0);
                self.checkLimitTime();
            } , self.limitStatus.speed);

            self.limitStatus.marginEndTimePromise = setInterval(()=>{
                if ( self.limitStatus.limitMarginTime <= 1000 ){
                    clearInterval(self.limitStatus.marginEndTimePromise);
                    self.limitStatus.limitMarginTime = 0;
                    return self.checkLimitTime();
                }
                self.limitStatus.limitMarginTime = Math.max(self.limitStatus.limitMarginTime - self.limitStatus.speed , 0);
                self.checkLimitTime();
            } , self.limitStatus.speed);
        },
        /**
         * [scrollSelectToTop 选择股数返回顶部]
         * @return {[type]} [description]
         */
        scrollSelectToTop(){
            let buyCountSelector = document.getElementById('J_buyCountSelector');
            if ( buyCountSelector ){
                buyCountSelector.scrollTop = 0;
            }
        },
        addBodyClickEvent(){
            let self = this;
            document.body.addEventListener('click' , (evt)=>{
                let target = evt.target;
                while ( target && target.nodeName && target.nodeName.toLowerCase() !== 'body' ){
                    if ( (' ' + target.className.trim() + ' ').indexOf(' ui-select ') >= 0 ){
                        return false;
                    }
                    target = target.parentNode;
                }
                self.hideAllSelect();
            });
        },
        hideAllSelect(status = false){
            this.scrollSelectToTop();
            for ( let statusName in this.selectStatus ){
                if ( status && status[statusName] ){
                    this.selectStatus[statusName] = true;
                }else {
                    this.selectStatus[statusName] = false;
                }
            }
        },
        switchAccountSelect(){
            this.hideAllSelect({account:!this.selectStatus.account});
        },
        selectAccount(accountId){
            if ( !this.render.isCanGetAssetPower ){
                return;
            }
            this.setApplyAccount(accountId);
            this.checkApplyType();
            this.hideAllSelect();
            this.checkLimitTime();
            this.getApplyAssetPower();
        },
        setApplyAccount(accountId){
            return this.account = this.getAccontByAccountId(accountId) || {accountId:'' , accountDesc:'--'};
        },
        getAccontByAccountId(accountId){
            for(let i = 0 ; i < this.accountList.length ; i++ ){
                if ( this.accountList[i].accountId === accountId ){
                    return Object.assign(this.accountList[i]);
                }
            }
            return false;
        },
        switchBuyCountSelect(){
            this.hideAllSelect({buyCount:!this.selectStatus.buyCount});
            if ( this.selectStatus.buyCount ){
                this.checkCashPartIsNotValidate();
            }
        },
        selectBuyCount(buyCount){
            let lotInfo = this.getStockBuyCountInformation(buyCount);

            //获取不到，金额不足不能认购
            if ( !lotInfo || this.isNeedDisable(lotInfo.minStockAssetPower , lotInfo.stockPrice) || this.isCantBuyAnyOne(Math.round((this.cashPart.cash || 0) * 100) * 10) ){
                return this.resetApplyData();
            }
            //有可以认购的，但是不是这一手，不做任何处理
            if ( Math.round((this.cashPart.cash || 0) * 100) * 10 < lotInfo.minStockAssetPower ){
                return;
            }
            this.hideAllSelect();

            console.log('[setApplyData] selectBuyCount is has you choice stock num....');

            this.setBuyCount(buyCount);
            this.setApplyData();
        },
        setBuyCount(num){
            for ( let i = 0 ; i < this.power.lotInfo.length ; i++ ){
                if ( +this.power.lotInfo[i].stockNum === +num && num > 0 ){
                    this.buyCount =  Object.assign({} , this.power.lotInfo[i]);
                    break;
                }
            }
        },
        /**
         * 检查是否直接设置现金金额
        */
        checkSetCashPart(){
            //不是融资认购
            if ( !(this.render.currentApplyType === MARGIN_TYPE && this.power.canUseBankMargin) ){
                this.cashPart.cash = (this.power.maxAssetPower || 0) / 1000;
            }else{
                this.cashPart.cash = '';
            }
            //存在未提交任务
            if ( this.applyInfo.accountId && this.render.currentApplyType === this.applyType.MARGIN_TYPE && this.power.canUseBankMargin ){
                this.cashPart.cash = formatNumberCeilByBit(this.applyInfo.cashPart , 0) / 1000;
            }
        },
        showError(error){
            console.log('[showError] error: ' , error.message);
            this.$store.commit('showDialog' , error.message || 'NetWork Error');
        },
        /**
         * 格式化购买力
        */
        setApplyAssetPower(power){
            console.log('[setApplyAssetPower] base apply power.  ' , power);

            power.maxApplyPower = formatNumberFloorByBit(power.maxApplyPower , 1);
            power.availableCash = formatNumberFloorByBit(power.availableCash , 1);
            power.maxAssetPower = formatNumberFloorByBit(power.maxAssetPower , 1);
            power.minAssetPower = formatNumberCeilByBit(power.minAssetPower , 1);

            power.minAssetPower = Math.min(power.maxAssetPower , power.minAssetPower);//取小的

            for (var i = 0; i < power.lotInfo.length; i++) {
                power.lotInfo[i].minStockAssetPower = formatNumberCeilByBit(power.lotInfo[i].minStockAssetPower , 1);
                power.lotInfo[i].lotInfoDesc = this.$t('xx股xx港币' , {
                    num: this.formatNumber(power.lotInfo[i].stockNum),
                    money: this.formatNumber(power.lotInfo[i].stockPrice / 1000  , 2)
                });
            }
            return this.power = Object.assign(power);
        },
        /**
         * 获取购买力
        */
        getApplyAssetPower(applyType){
            //没有认购方式，正在获取购买力，未开户
            if ( (!applyType && !this.render.currentApplyType) || !this.render.isCanGetAssetPower || !this.isSetup ){
                return;
            }

            this.render.isCanGetAssetPower = false;

            applyType = applyType || this.render.currentApplyType;

            this.$store.commit('showLoading');
            //购买力数据
            let data = {
                stockId: this.stock.stockId ,
                tid: this.detail ? this.detail.tid : 0,
                accountId: this.account.accountId ,
                onlyUseCash: applyType === CASH_TYPE ? 1 : 0,
                zeroAsset: applyType === ZERO_TYPE ? 1 : 0
            };

            //重置购买力，金额，认购股数
            this.power = false;

            this.cashPart.cash = '';
            this.cashPart.isNotValidate = false;
            this.cashPart.errorTxt = '';

            this.buyCount = false;

            return xhr.get({url:'/api/getAssetPower' , data})
                .then(checkResponse , handlerError)
                .then(this.setApplyAssetPower.bind(this))
                .then(()=>this.$store.commit('hideLoading'))
                .then(this.checkSetCashPart.bind(this) , (err)=>{
                    this.$store.commit('hideLoading');
                    return this.$store.dispatch('showLight' , err.message || 'NetWork Error')
                })
                .then(this.scrollSelectToTop.bind(this))
                .then(this.checkApplyTips.bind(this))
                .then(this.resetApplyData.bind(this))
                .then(()=>{ // 存在缓存任务的时候需要选择认购股数
                    if ( this.applyInfo.accountId && this.applyInfo.buyCount ){
                        this.selectBuyCount(this.applyInfo.buyCount);
                    }
                    this.$store.commit('setApplyData' , {});
                })
                .then(()=>this.render.isCanGetAssetPower = true);
        },
        setApplyBaseInformation(result){
            console.log('base apply information: ' , result);
            //股票信息
            this.stock = Object.assign(this.stock , result.stock , {
                marginInterestDays: this.getMarginInterestDays(result.stock.deductTime , result.stock.publishTime)
            });
            //账户列表
            this.accountList = [].concat(this.accountList , result.accounts);
            //任务详情
            this.detail = result.detail ? Object.assign(this.detail , result.detail) : false;
            //倒计时
            this.limitStatus = Object.assign(this.limitStatus , {
                limitEndTime : Math.max((this.stock.endTime || 0 ) - Date.now() , 0),//普通认购倒计时
                limitMarginTime: Math.max((this.stock.marginEndTime || 0 ) - Date.now() , 0)//融资认购倒计时
            });
            // 只有单个账户
            this.checkIsOnlyOneMarginAccount();
            //存在缓存任务
            if ( this.applyInfo.accountId ){
                this.setApplyAccount(this.applyInfo.accountId);
            }else if ( this.detail ){ //任务
                this.setApplyAccount(this.detail.accountId);
            }else if ( this.accountList.length ){
                this.setApplyAccount(this.accountList[0].accountId);
            }
            //展示账户
            this.checkAccountCanSelect();
            //展示倒计时
            this.checkLimitTime();
            //展示认购类型
            this.checkApplyType();
            //倒计时
            this.runLimitTime();
            //存在认购方式
            if ( this.applyInfo.applyType ){
                this.selectApplyType(this.applyInfo.applyType)
            }else {
                //获取购买力
                this.getApplyAssetPower();
            }
        },
        getApplyBaseInformation(code){
            this.$store.commit('showLoading');
            return xhr.get({url:'/api/getApplyBaseInformation' , data:{code}})
                .then(checkResponse , handlerError)
                .then(this.setApplyBaseInformation.bind(this))
                .then(this.checkSetUp.bind(this) , this.showError.bind(this))
                .then(()=>this.$store.commit('hideLoading'))
                .then(this.checkIsCanModify.bind(this));
        },
        /**
         * 提交认购
        */
        apply(){
            if ( this.checkIsCanApply() ){
                console.log('[apply] apply now. data:' , this.applyData);
                this.$store.commit('setApplyData' , Object.assign({} , this.applyData , this.account , {
                    marginInterest:this.stock.marginInterest,
                    marginInterestDays: this.stock.marginInterestDays,
                    stockCode: this.stock.stockCode,
                    stockDesc:this.stock.stockDesc
                }));
                return this.$router.push({name:'information',path:'/information'});
            }
        },
        /**
         * 用户是否已经开户
        */
        checkSetUp(){
            if ( !this.isSetup ){
                return this.$store.commit('showDialog' , {
                    isCancel: false,
                    message:this.$t('抱歉您的证券账户尚未开通，暂时无法新股认购'),
                    sub: this.$t('完成开通'),
                    callBack: ()=> window.location.href = `//${this.domain.futu5}/setup`,
                    canlBack: ()=> window.location.href = `//${this.domain.futu5}/setup`
                });
            }
        },
        /**
         * 是否支持修改
        */
        checkIsCanModify(){
            if ( !this.detail || !this.isSetup ){
                return this.render.isCanModify = true;
            }
            let marginUpdateEndTime = Math.min(this.stock.marginUpdateEndTime , this.stock.marginEndTime);
            //任务已经处理
            if ( +this.detail.status !== 0 ){
                this.render.isCanModify = false;
                return this.$store.commit('showDialog' , {
                    isCancel:false,
                    sub:this.$t('查看'),
                    message: this.$t('您已申请认购该支股票，查看任务详情'),
                    callBack: ()=> window.location.href = `/detail?tid=${this.detail.tid}&stockCode=${this.stock.stockCode}`,
                    canlBack: ()=> window.location.href = '/history'
                });
            }
            //0本金认购
            if ( this.detail.zeroAsset ){
                this.render.isCanModify = false;
                return this.$store.commit('showDialog' , {
                    message: this.$t('您已申请认购该支股票，若需要修改，请在认购记录列表中先撤销后重新提交申请'),
                    sub: this.$t('查看'),
                    callBack: ()=> window.location.href = `/detail?tid=${this.detail.tid}&stockCode=${this.stock.stockCode}`,
                    canlBack: ()=> window.location.href = '/history'
                });
            }else if( this.detail.marginPart && marginUpdateEndTime < Date.now() ){  //融资认购
                this.render.isCanModify = false;
                return this.$store.commit('showDialog' , {
                    message: this.$t('银行融资认购修改已于xx时间结束，当前时间已不支持修改认购' , {time: formatDate(marginUpdateEndTime , 'yyyy-MM-dd HH:mm')}),
                    callBack: ()=> window.location.href = `/detail?tid=${this.detail.tid}&stockCode=${this.stock.stockCode}`,
                    canlBack: ()=> window.location.href = '/history'
                });
            }
            return this.render.isCanModify = true;
        }
    },
    mounted(){
        let self = this;
        self.$nextTick(function(){
            // this.$route获取 https://ipo.futu5.com/apply?code=00081#/ 失败
            let code = self.$route.query.code || '';
            let stockCode = self.$route.query.stockCode || '';
            //getUrlKey  获取 https://ipo.futu5.com/apply#/?code=00081 失败
            code = getUrlKey('code') || code;
            stockCode = getUrlKey('stockCode') || stockCode;
            if ( !code && !stockCode ){
                return window.location.href = '/list';
            }
            self.getApplyBaseInformation(code || stockCode);
            self.addBodyClickEvent();
        });
    },
    components: {uiLoading , uiDialog , uiLightDialog , notice , tips}
};
</script>

<style lang="scss" scoped>
$MEDIA_WIDTH:768px;

.container{
    width: 100%;
    margin-left: auto;
    margin-right: auto;
}
.wrapper{
    width: 100%;
    box-sizing: border-box;
}
.container::before,
.container::after,
.wrapper::before,
.wrapper::after{
    clear: both;
    content: "";
    display: table;
}
.pc-title-wrapper{
    border-bottom: 1px solid #DDE2EB;
}
.order-form {
    padding: 0 30px;
    box-sizing: border-box;
}
.order-form .ui-select-input.unselect{
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    cursor: pointer;
}
.order-form .from-group {
    margin: 24px 0;
    position: relative;
    box-sizing: border-box;
    padding-left: 100px;
}
.order-form .from-group:first-child{
    margin-top: 12px;
}
.order-form .from-group:last-child{
    margin-bottom: 12px;
}
.order-form .from-group .form-label {
    font-size: 14px;
    color: #284058;
    line-height: 14px;
    padding: 15px 0;
    max-width: 100px;
    position: absolute;
    left: 0;
    top: 0;
    vertical-align: baseline;
}
.order-form .from-group .form-container {
    width: 100%;
}
.order-form .from-group .form-container .form-content {
    width: 280px;
}
.order-form .from-group .form-container .form-tips {
    font-size: 12px;
    color: #B0BDC7;
    letter-spacing: 0;
    padding: 4px 0;
}
.order-form .from-group .form-container .form-tips .ui-notice{
    color: #284058;
}
.order-form .from-group .form-container .form-tips.up-account{
    font-size: 14px;
}
.order-form .from-group .form-container .form-fix{
    margin-left: 16px;
    float: left;
    font-size: 14px;
    color: #284058;
    line-height: 14px;
    padding: 15px 0;
}
.order-form .ui-select-menu.show {
    display: block;
    z-index: 10;
}
.order-form .ui-select-input.unselect {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}
.order-form .ui-select {
    z-index: 0;
}
.order-form .ui-select .icon-arrow01-up {
    display: none;
}
.order-form .ui-select.show {
    z-index: 99;
}
.order-form .ui-select.show .icon-arrow01-down {
    display: none;
}
.order-form .ui-select.show .icon-arrow01-up {
    display: inline-block;
    color: #3378dd;
}
.order-form .ui-select .ui-select-option.disable{
    color: #B0BDC7;
}
.ui-select-option .cash-tips{
    display: none;
}
.ui-select-option .lot-tips{
    color: #b0bdc7;
}
.ui-select-option.disable .cash-tips{
    display: block;
}
.support-high{
    width: 280px;
    height: 110px;
    background: #FFFFFF;
    border: 1px solid #C8D0DC;
    box-sizing: border-box;
    padding: 12px;
    display: block;
    float: left;
    margin-right: 12px;
    cursor: pointer;
}
.support-high:last-child{
    margin-right: 0;
}
.support-high .sup-title{
    font-size: 14px;
    color: #284058;
    display: block;
    line-height: 14px;
    margin-bottom: 10px;
}
.support-high .sup-tips{
    font-size: 12px;
    color: #808F9E;
    letter-spacing: 0;
    line-height: 20px;
    display: block;
}
.buy-type{
    background: #FFFFFF;
    border: 1px solid #C8D0DC;
    font-size: 14px;
    color: #284058;
    line-height: 14px;
    display: inline-block;
    padding: 14px 22px;
    box-sizing: border-box;
    cursor: pointer;
    user-select:none;
    position: relative;
}
.buy-zero-tips{
    position: absolute;
    right: -10px;
    top: -10px;
    background: #FF6700;
    font-size: 12px;
    color: #FFFFFF;
    letter-spacing: 0;
    line-height: 14px;
    padding: 2px;
    z-index: 2;
    border-top-left-radius: 8px;
    border-bottom-right-radius:8px;
}
.buy-type.mr12{
    margin-right: 12px;
}
.zero-container{
    margin-left: 12px;
}
.zero-container .buy-type{
    padding: 14px 18px;
}
.buy-type.active{
    background: #E9F2FF;
    border: 1px solid #037AFF;
}
.buy-type.disable{
    background: #FFFFFF;
    cursor: not-allowed;
    color: #B0BDC7;
    border: 1px solid #B0BDC7;
}
@media screen and (min-device-width: 769px) {
    .buy-type:hover{
        background: #E9F2FF;
        border: 1px solid #037AFF;
    }
    .buy-type.disable:hover{
        background: #FFFFFF;
        border: 1px solid #B0BDC7;
    }
    .tips-right .ui-notice-wrapper{
        right: 0;
        left: auto;
    }
    .zero-container{
        display: inline-block;
    }
}
.use-cash,
.limit-time{
    font-size: 14px;
    line-height: 15px;
    padding: 15px 0;
    color: #284058;
}
.limit-time .small{
    font-size: 12px;
    color: #B0BDC7;
}
.limit-time.pt0 {
    padding-top: 0
}
.yl,
.use-cash .txt,
.use-money .txt .yl,
.limit-time .yl{
    color: #FF6400;
}
.use-stock .txt,
.use-account .txt,
.use-money .txt{
    font-size: 14px;
    line-height: 20px;
    padding: 12px 0;
    color: #284058;
    display: inline-block;
    float: left;
    min-height: 20px;
}

.use-money .total{
    display: inline-block;
    width: 200px;
    height: 20px;
    background: #DDE2EB;
    float: left;
    margin-top: 12px;
}
.use-money .total .pre{
    display: block;
    max-width: 200px;
    min-width: 70%;
    height: 20px;
    background: #FF424A;
    font-size: 12px;
    color: #FFFFFF;
    line-height: 20px;
    padding-left: 10px;
}

.ipo-next-container{
    box-sizing: border-box;
    padding: 0 30px;
    margin-top: 16px;
}
.ipo-next-container .next-container{
    border-top: 1px solid #E9EFF8;
    padding-top: 44px;
}
@media screen and (max-device-width: $MEDIA_WIDTH) {
    .pc-title-wrapper{
        display: none;
    }
    .ipo-container {
        width:100%;
    }
    .ipo-title-container,.ipo-calendar-container {
        display: none!important;
    }
    .order-form {
        padding: 0 14px;
        background: #fff;
    }
    .order-form .from-group {
        padding-left: 96px;
    }
    .order-form .from-group .form-label {
        max-width: 96px;
    }
    .order-form .from-group .form-container .form-content {
        width: 100%;
    }
    .order-form .from-group .form-container .form-tips {
        padding: 4px 0;
        font-size: 12px;
        margin-left: 0;
    }
    .order-form .from-group .form-container .count-container .ui-form-text {
        width: 100%;
    }
    .use-money .total {
        margin-top: 0;
    }
    .ipo-next-container {
        width: 100%;
        position: fixed;
        bottom: 0;
        left: 0;
        box-sizing: border-box;
        padding: 14px;
        background: #fff;
        margin-top: 0;
        z-index: 2;
        border-top: 1px solid #dde2eb;
    }
    .ipo-next-container .next-container {
        padding-top: 0;
        border-top: 0;
    }
    .ipo-next-container .ui-btn {
        width: 100%;
        box-sizing: border-box;
    }
    .zero-container{
        margin-top: 24px;
        margin-left: 0;
    }
    .en-us .buy-type{
        padding: 7px 12px;
        margin-top: 6px;
    }
}
@media screen and (max-device-width: 374px){
    .buy-type{
        padding: 14px 8px;
    }
}

.en-us .order-form .from-group{
    margin: 0;
    padding: 14px 0;
    .form-label{
        max-width: 100%;
        position: relative;
        width: 100%;
        padding: 0;
    }
    .form-container{
        position: relative;
        margin: auto;
        padding-top: 4px;
        color: #284058;
    }
    .limit-time,
    .ui-select-group input,
    .txt{
        font-size: 16px;
        line-height: 28px;
        padding: 0;
    }
    .buy-type{
        font-size: 16px;
        line-height: 28px;
    }
}
</style>
